# MQTT 主題規範

> **唯一真相來源** - ESP32 韌體與後端必須使用相同主題

## 主題列表

| 用途 | 主題格式 | 發布者 | 訂閱者 |
|------|----------|--------|--------|
| 設備數據上報 | `iot/data/{device_uuid}` | ESP32 | infra (listener.py) |

> ⚠️ **待確認**：以下主題需與 ESP32 韌體實際實作對齊後再啟用

| 用途 | 主題格式 | 狀態 |
|------|----------|------|
| 指令下發 | 待定 | 🔴 未實作 |
| 認證 | 待定 | 🔴 未實作 |

## 訊息格式

### 設備數據上報 (`iot/data/{device_uuid}`)

```json
{
  "coin_in_count": 100,
  "payout_count": 50,
  "timestamp": "2026-01-05T10:30:00Z",
  "data_type": "periodic"
}
```

## 修改流程

1. 先確認 ESP32 韌體實際使用的主題
2. 更新此文件
3. 通知所有相關專案同步

---
*最後更新：2026-01-05*
